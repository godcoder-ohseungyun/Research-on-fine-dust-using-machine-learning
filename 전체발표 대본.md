## 작품명

머신러닝을 이용한 미세먼지 영향요인 분석 및 관리 서비스: readAir

---

## 팀원소개

승윤: 서비스 설계 및 구축 

대웅: 서비스 디자인 및 머신러닝 적용

시훈: 데이터 정재 및 관리

---

## 발표순서

+ 주제선정
+ 기술소개
+ 서비스 소개 및 결론

---

## 주제선정



### 무엇을 만들까?

저희는 이런 단순한 질문에서 시작했습니다.

저희에게 공학의 가치란 우리의 사회의 문제를 공학의 힘을 이용해 니즈를 해결하고 비젼을 제시하는것이라고 생각했습니다.

그래서 저희는 현대의 이슈,공학적 기술 그리고 니즈를 모아 제시하고자하는 비전담은 파이를 완성시켜보고자 했습니다.



### 현대의 이슈

현대의 이슈는 코로나,사회갈등 등등 다양하죠, 저희는 여기서 미래지속적이고 우리의 생존과 직결되어있는 미세먼지에

집중했습니다.



**왜 미세먼지를 선택했는가?**

현재 우리나라의 미세먼지 심각성은 세계적입니다.

또한, 건강. 경제. 생활. 전역에 지대한 영향을 미치고있죠.



### **우리의 니즈**

그렇다면 우리는 무엇을 원할까요?

넓게는 미세먼지를 궁극적으로 해결하는 방안일것이고 좁게는 내 삶속에서 미세먼지를 어떻게 효율적으로 다뤄야할지 알고싶을 것입니다.



### **공학적 접근**

현대의 미세먼지 예측기법은 기상정보와 대기질정보를 혼합한 예측기법입니다

대기질과 기상정보로는 단기간 정보만 예측할 뿐이죠. (일주일 단위)

더 먼 미래를 예측할순 없을까요? 

저희는 좀 더 근본적인 접근을 해보았습니다.

1. 지역별로 미세먼지는 상이하다.
2. 미세먼지 농도에 영향을 미치는 그 지역만에 요인이 존재하지 않을까?
3.  이 요인들을 알아낸다면 추후 도시계발사업등 그 지역에 추가되는 요인들에 따라 미세먼지 악화도 비례하지 않을까?



### **그래서 무엇을!**

기상만을 고려한 단기적 예측이 아닌 국내 유효요인들을 찾아내 미래의 유효요인의 변동추세를 예측해 장기적인 예측이 가능하게 함으로써 

1. 국가단위에선 미세먼지 문제를 완화하기위해 어떤 요인들을 관리해야할지 알수있고,관리했을때 미래에 어떻게 될지 예측할수있도록 한다.

2. 주거하는 또는 주거할 환경에 맞는 공기질 관리법 , 케어제품을 추천함으로써  중장기적인 공기질 관리 계획을 세울수있다.

3. 현재 추세가 유지될시 먼 미래에 나타날 전망을 직관적으로 보이고 완화를 위핸 노력,캠패인,행사등을 소개함으로써 참여를 독려한다.



### 제한조건

시작에 앞서 저희는 더 정확한 결과를 얻기위해 아래와 같은 제한사항을 마련했습니다. 



**국내 요인 vs 국외 요인**

미세먼지가 중국 때문이라고 생각하는 국민들이 많지만 사실은 그렇지 않습니다. 환경부 발표에 따르면 

국내 초미세먼지의 51%가 자체 기여이고 중국 기여는 32%에 불과하다고 합니다.

또한, 우리가 주목해야할 방향은 국외가 아닌 국내요인을 해결하는 것이여야 할것임으로 모집단을 국내 요인으로 한정합니다.



**태백산맥 동 vs 서**

+ [미세먼지 안전지대로 떠오르는 동해안…청정휴양 랜드마크 ‘파인아트라벨’ 눈길 (seoul.co.kr)](https://m.seoul.co.kr/news/newsView.php?id=20181203500087)

태백산맥의 고도는 미세먼지 확산에 영향을 미치는 대기혼합층 고도보다 높아 동과 서가 확연한 차이를 보입니다.

모집단이 공평한 환경이어야 한다는 점에서 배제 가능한 수준이 아니라고 판단해 태백산맥 서쪽으로 모집단을 한정합니다.



**수집대상지역 한정**

(..합의중..)





---

## 기술소개



### 어떤 컴퓨터공학적 기술들이 이용되나요? 

저희 서비스에 이용된 기술들을 소개하겠습니다. 저희 기술의 두가지 포인트는 <u>효과적인 머신러닝</u>과 <u>효율적인 서버 기술</u> 이라고 할수있습니다



| 머신러닝                                                     | 서버기술                                   |
| ------------------------------------------------------------ | ------------------------------------------ |
| 다중로지스틱회귀분석을 이용한 미세먼지 유효요인 분석         | 유지보수가 가능한 구조                     |
| 다중선형회귀분석을 이용한 지역별 유효요인 추세 예측          | 자동으로 미래 지속성을 유지할수있는 구조   |
| 선형회귀분석을 이용해 유효요인 추세로 부터 미래 미세먼지 변화량 예측 | 사용자에게 빠르게 응답을 제공할수있는 구조 |



전체적인 서비스의 설계도입니다. 먼저 이 부분 머신러닝 서버가 수행하는 로직부터 보시죠.



*(서버 그림에서 머신로직으로  페이드인)*



### 머신러닝

머신러닝의 키포인트는 <u>유효요인을 찾고</u> <u>유효요인들의 추세를 예측</u>하고 이로써 <u>먼 미래의 미세먼지 변화량예측</u>이 가능하도록 하는것입니다.



**더 먼 미래를 예측하자  part1.유효요인찾기(feat.다중 로지스틱 회귀분석)**



+ **로지스틱 회귀 분석이란?**

**로지스틱 회귀(Logistic Regression)**는 회귀를 사용하여 독립변수가 어떤 범주형 종속변수에 속할 확률을 예측하고 그 확률에 따라 가능성이 더 높은 범주에 속하는 것으로 분류해주는 지도 학습 알고리즘입니다.



(..내용보충 필요..)





따라서 다중 로지스틱 회귀 분석은 유효요인을 찾아내는데 활용할수있습니다.



+ **학습데이터 수집**

가장 먼저 로지스틱 회귀 모델을 학습시킬 학습데이터를 수집해야합니다. 저희는 이 데이터 프레임을 파이널데이터 프레임이라고 명명합니다.

파이널 데이터프레임은 이와 같습니다.

데이터 수집과 정재는 서버가 관리하는데 관리자가 수집할 데이터,수집기간만 정의하면 kosis rest api 서버로 자동으로 요청을 보내 받아온 json data를 데이터프레임으로 변환해 캐시스토리지에 save합니다.

서버는  캐시스토리지에 수집된 데이터를 정재하고 병합해 하나의 파이널 데이터 프래임(학습데이터)를 생성합니다.

서버는 1년 주기로 추가 요청을 보내 캐시서버와 파이널 데이터 프레임을 자동으로 최신화합니다.



+ **데이터 정규화**        

머신러닝 알고리즘은 데이터가 가진 feature(특성)들을 비교하여 데이터의 패턴을 찾는데,

각 데이터가 가진 feature의 스케일이 심하게 차이가 나는 경우 특정 feature가 다른 feature들을 완전히 지배할 수 있기 때문에

서버는 데이터 정규화를 진행합니다.

이때, MIN-MAX Normalization는 이상치 문제를 가지고있어 저희 데이터를 정규화하기에 적합하지않아  Z-Score Normalization을 이용합니다.





+ **수행결과**

서버는 생성한 파이널 데이터 프레임을 가지고 로지스틱 회귀 모델을 학습시킨후 결과를 반환합니다. 

로지스틱 회귀 분석 결과를 보면 해당 독립변수들이 종속변수에게 미치는 상관도를 알수있습니다.

저희는 여기서 가장 높은 상관도를 가진 3가지 요인을 선별했습니다.





**더 먼 미래를 예측하자  part2.지역별 유효요인 추세 예측(feat.다중선형회귀분석)**

+ **다중선형회귀분석이란?**

머신 러닝의 가장 큰 목적은 실제 데이터를 바탕으로 모델을 생성해서 만약 다른 입력 값을 넣었을 때 발생할 아웃풋을 예측하는 데에 있습니다.

이때 우리가 찾아낼 수 있는 가장 직관적이고 간단한 모델은 **선(line)**이다. 그래서 데이터를 놓고 그걸 가장 잘 설명할 수 있는 선을 찾는 분석하는 방법을 **선형 회귀(Linear Regression)** 분석이라 부릅니다.

종속변수와 독립변수 데이터를 펼쳐두고 그것들을 가장 잘 표현하는 선 즉, 추세선을 구하면  독립변수에 의한 종속변수의 값을 예측할수있습니다.

결국 선형 회귀 모델의 목표는 모든 데이터로부터 나타나는 오차의 평균을 최소화할 수 있는 최적의 기울기와 절편을 찾는 것입니다.



당연히 추세선은  실제 데이터와 약간의 차이가 발생하게 됩니다. 이런 차이를 오차 또는 손실이라고 부릅니다.



이런 손실을 최소화 하기위해 경사하강법을 이용해  파라미터를 점점 줄여나가 최적의 값으로 수렴하는 최적의 파라미터를 찾아야 합니다.

이때 줄여나가는 간격인 최적의 학습률을 적용해 효율적으로 최적 파라미터를 찾아 손실이 최소화되는 추세선공식을 찾아냅니다.











+ **다중선형회귀분석모델-학습**

서버는 이제 로지스틱회귀 분석으로 얻은 3개의 유효요인을 가지고 이와같이 지역별로 유효요인들의 추이를 년단위로 조사하여 학습데이터를 생성, 다중선형회귀분석을 수행합니다.



+ **다중선형회귀분석모델-결과**

다중 선형 회귀 분석 모델로부터 얻은 추세선 공식을 가지고 지역별 유효요인의 추세를 예측할수있습니다.

이때, 개발사업등 정책적 요인도 추이에 적용하면 더 정확한 결과가 나올것으로 예상됩니다.





**더 먼 미래를 예측하자  part3.더 먼 미래의 미세먼지(feat.선형회귀분석)**

우리는 다중선형회귀분석모델에서 얻은 결과로 지역별 유효요인의 먼 미래도 예측할수있게되었습니다.

다중로지스틱회귀분석이 암시하듯 유효요인 추세는 미세먼지추세와 비례함으로

이로써  먼 미래의 미세먼지 추이를 예측할수있게 되었습니다.



*(서버 그림에서 페이드 아웃)*



### 서버

지금까지 서버가 어떤 로직을 거쳐서 결과를 만들어 내는지 소개했습니다. 

이번엔 이 서버가 어떻게 효율적으로 동작하는지 소개하겠습니다

이 머신러닝과정은 I/O마다 수행하기에는 너무나 방대하고 무겁습니다. 조금만 트래픽이 증가해도 서버는 견디질 못할겁니다.

저희는 그래서 서버를 이렇게 설계했습니다.

+ Spring webflux achyncrous none-block i/o를 이용한 효율적인 트래픽관리!
+ 캐싱을 이용한 빠른 응답성 보장!
+ 머신러닝, i/o 목적에 따라 분산구조



그럼 이제 이 모든것이 조화를 이뤄서 만들어진 저희 서비스 설명과 함께 실제 데이터를 확인해보겠습니다.



---

## 서비스소개



### 시연

알고싶은년도를 입력합니다.

역시나 시연 결과를 보면 암담한 결과를 확인할수있는데요. 이렇게 그래픽으로 막상 마주하니 더 경각심이 생기는것 같습니다.

하지만 실제로 이 유효요인들을 저희가 임이로 감소시켰을때 미세먼지 량을 보시면 꽤나 긍정적인 효과가 있다고 보여집니다.

비타민 유효요인은 늘리고 안티비타민 유효요인은 줄이는 노력을 우리가 할 필요가 있다는것을 알수있습니다.



### 서비스

넓은 니즈

+ 저희 서비스는 더 나은 미래를 만들기위해 경각심을 일깨우는것 뿐 아니라 어떤 요인들을 관리해야하는지 알리고 누구나 실천할수있는 캠페인,운동,노력들을 소개합니다.



좁은 니즈

+ 하지만 현재도 중요하죠. 내가 주거하는 또는 주거할 공간이 미래에 어떤지, 내 주거 환경에 딱 맞는 제품,공기질 관리방법 또한 소개받을수있습니다. 



### 결론

이러한 저희 서비스를 이용해서 삶속에서 미세먼지를 관리하고 더 나아가 국내 미세먼지를 효과적으로 다루고 개선할수있기를 기대합니다.

